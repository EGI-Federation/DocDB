#! /usr/bin/env perl
#
# Author Eric Vaandering (ewv@fnal.gov)
#

use CGI;                                                                                      
#use DBI;                                                                                      

require "DocDBGlobals.pm";
require "HTMLUtilities.pm";
require "SecuritySQL.pm";
require "Scripts.pm";
require "ResponseElements.pm";

$query = new CGI;  # Global for subroutines

# %params = $query -> Vars;  # No parameters (yet?) 
#$dbh   = DBI->connect('DBI:mysql:'.$db_name.':'.$db_host,$db_rouser,$db_ropass);
#&GetSecurityGroups;

print $query->header;
&BTeVHeader("BTeV Document Database","Document Database");

&HelpPopupScript;

print "<p><center><h4>\n";
if ($Public) {
  print "Welcome to the public portion of the BTeV Document Database,<br>the repository for all BTeV public talks,
  proceedings, preprints, and publications.\n";
} else {
  print "<a href=\"$HelpFile\">Instructions on using</a> the database. \n";
  print "Click on any <font color=red>red link</font> for quick help.\n";
}
print "</h4></center>\n";

print "<p><b>Find the information you want in the database:</b>\n";
print "<ul>\n";

unless ($Public) {
  print "<li><a href=\"$SearchForm\">Search</a> documents (beta version)"; 
}

print "<p>\n";

print "<li>"; 
print $query -> startform('POST',$ShowDocument);
print $query -> submit (-value => "Show");
print " <b>BTeV-doc-#</b> "; 
print $query -> textfield(-name => "docid", -size => 6, -maxlength => 6);
print " <b>-v</b> "; 
print $query -> textfield(-name => "version", -size => 3, -maxlength => 3);
if ($Public) {
  print "&nbsp;&nbsp;(Looking for a document 
        <a href=\"$web_root/Static/Public/OldDBTranslation.shtml\">like
         BTeV-int-year/xx</a>?)\n";
} else {
  print "&nbsp;&nbsp;(Looking for a document 
        <a href=\"$web_root/Static/Restricted/OldDBTranslation.shtml\">like
         BTeV-int-year/xx</a> from the <a href=\"http://www-btev.fnal.gov/cgi-private/database/doclist.pl\">old DocDB</a>?)\n";
}
print $query -> endform;


print "<li>"; 
print "List ";
print "documents modified in the <a href=\"$LastModified?days=$LastDays\">last $LastDays days</a>, ";
print "or by <a href=\"$ListAuthors\">author</a>, ";
print "<a href=\"$ListTopics\">topic</a>, ";
#print "<a href=\"$ListTypes\">type</a>, ";
unless ($Public) {
  print "<a href=\"$ListMeetings\">group meeting</a>, ";
}
print "<a href=\"$ListByTopic?major=Conferences&mode=conference\">conference
documents</a>, ";
print "or <a href=\"$ListDocuments\">all documents</a>. ";
print "<li><a href=\"$ModifyHome\">Create or change</a> documents"; 

print "</ul>\n";


&DocDBNavBar;
&BTeVFooter($DBWebMasterEmail,$DBWebMasterName);

